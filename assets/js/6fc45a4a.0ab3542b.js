"use strict";(self.webpackChunkregression_docs=self.webpackChunkregression_docs||[]).push([[2602],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),u=o,g=d["".concat(l,".").concat(u)]||d[u]||h[u]||i;return n?a.createElement(g,r(r({ref:t},c),{},{components:n})):a.createElement(g,r({ref:t},c))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:o,r[1]=s;for(var p=2;p<i;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3879:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=n(7462),o=(n(7294),n(3905));const i={sidebar_label:"Building Your First Bot"},r="Building Your First Bot",s={unversionedId:"studios/unity/tutorials/first_tutorial",id:"studios/unity/tutorials/first_tutorial",title:"Building Your First Bot",description:"This API and reference is subject to change, as the product is in an early preview. We",source:"@site/docs/studios/unity/tutorials/first_tutorial.md",sourceDirName:"studios/unity/tutorials",slug:"/studios/unity/tutorials/first_tutorial",permalink:"/studios/unity/tutorials/first_tutorial",draft:!1,tags:[],version:"current",frontMatter:{sidebar_label:"Building Your First Bot"},sidebar:"studiosSidebar",previous:{title:"Validation Bots",permalink:"/studios/unity/unity-sdk/creating-bots/validation-bots"},next:{title:"Testing with GitHub Actions",permalink:"/studios/unity/tutorials/github_actions"}},l={},p=[{value:"Create an account on Regression Games",id:"create-an-account-on-regression-games",level:2},{value:"Download the sample game",id:"download-the-sample-game",level:2},{value:"Import the Regression Games Unity Bots package",id:"import-the-regression-games-unity-bots-package",level:2},{value:"Restart Unity and your IDE",id:"restart-unity-and-your-ide",level:2},{value:"Log into Regression Games",id:"log-into-regression-games",level:2},{value:"Add the RGOverlayCanvas",id:"add-the-rgoverlaycanvas",level:2},{value:"Implement the RGBotSpawnManager",id:"implement-the-rgbotspawnmanager",level:2},{value:"Add state information to relevant GameObjects",id:"add-state-information-to-relevant-gameobjects",level:2},{value:"Implement actions your bot can take",id:"implement-actions-your-bot-can-take",level:2},{value:"Activate and start Regression Games in your game loop",id:"activate-and-start-regression-games-in-your-game-loop",level:2},{value:"Putting it all together",id:"putting-it-all-together",level:2},{value:"Extensions - Configuring your bot",id:"extensions---configuring-your-bot",level:2},{value:"Next steps",id:"next-steps",level:2}],c={toc:p},d="wrapper";function h(e){let{components:t,...i}=e;return(0,o.kt)(d,(0,a.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"building-your-first-bot"},"Building Your First Bot"),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"This API and reference is subject to change, as the product is in an ",(0,o.kt)("strong",{parentName:"p"},"early preview"),". We\nare making changes based on your recommendations and feedback, so let us know what you think at\n",(0,o.kt)("a",{parentName:"p",href:"mailto:info@regression.gg"},"info@regression.gg"))),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"This tutorial assumes a basic understanding of Unity concepts.")),(0,o.kt)("p",null,"In this tutorial, we will get a simple game up and running where a character (represented by a green cube) needs to collect\npower ups (represented by blue spheres). We will cover:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"How to integrate the RG Unity SDK into your game"),(0,o.kt)("li",{parentName:"ul"},"How to add various state and actions scripts to your game for bots to understand"),(0,o.kt)("li",{parentName:"ul"},"How to build your first bot")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"A Unity scene with a cube and a sphere",src:n(1218).Z,width:"3456",height:"2156"})),(0,o.kt)("h2",{id:"create-an-account-on-regression-games"},"Create an account on Regression Games"),(0,o.kt)("p",null,"The first step is to create an account on Regression Games. Visit the ",(0,o.kt)("a",{parentName:"p",href:"https://play.regression.gg"},"Regression Games site"),'\nand click "sign up". Enter a username, email, and password. Once you log\nin, select "I am a game developer". You will be prompted to connect a GitHub account. After connecting your account,\nthe Regression Games platform will be able to pull and live reload bots through GitHub repositories.'),(0,o.kt)("h2",{id:"download-the-sample-game"},"Download the sample game"),(0,o.kt)("p",null,"We have a sample project that you can play around with to get started. Download that project\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Regression-Games/RGUnitySample/tree/starter"},"here")," or clone it using GitHub. ",(0,o.kt)("strong",{parentName:"p"},"Make sure to\ndownload or clone the ",(0,o.kt)("inlineCode",{parentName:"strong"},"starter")," branch"),", which serves as the starting point for this tutorial. For\nthe completed tutorial, see the ",(0,o.kt)("inlineCode",{parentName:"p"},"main")," branch."),(0,o.kt)("p",null,"Run the following commands in your terminal to start:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"git clone https://github.com/Regression-Games/RGUnitySample.git\ncd RGUnitySample\ngit checkout starter\n")),(0,o.kt)("p",null,"Once this is cloned, download ",(0,o.kt)("strong",{parentName:"p"},"Unity version 2021.3.24f1")," (visit the ",(0,o.kt)("a",{parentName:"p",href:"https://unity.com/releases/editor/archive"},"Unity archive"),"\nif you can't find that version). Open the cloned project in this Unity version. "),(0,o.kt)("p",null,"Once the project is loaded, open the scene at ",(0,o.kt)("strong",{parentName:"p"},"Assets > Scenes > SampleScene"),". This scene features a prefab\nfor a character and a power up type, as well as three scripts; one for controlling\nthe game loop, one for controlling the character, and one for controlling the power up logic."),(0,o.kt)("h2",{id:"import-the-regression-games-unity-bots-package"},"Import the Regression Games Unity Bots package"),(0,o.kt)("p",null,"Our package is available via GitHub ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Regression-Games/RGUnityBots"},"here"),". Import the repository by\nclicking ",(0,o.kt)("strong",{parentName:"p"},"Add package from git URL")," in the ",(0,o.kt)("strong",{parentName:"p"},"Package Manager")," window (this window can be opened\nin the ",(0,o.kt)("strong",{parentName:"p"},"Window > Package Manager")," menu) and pasting in the following URL."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"https://github.com/Regression-Games/RGUnityBots.git\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Note that this package utilizes TextMeshPro.  If you are prompted by Unity to add TextMeshPro assets to your project, please add them."),(0,o.kt)("li",{parentName:"ul"},"Note that this package installs a dependency of Newtonsoft Json (",(0,o.kt)("a",{parentName:"li",href:"https://docs.unity3d.com/Packages/com.unity.nuget.newtonsoft-json@3.1/manual/index.html"},"https://docs.unity3d.com/Packages/com.unity.nuget.newtonsoft-json@3.1/manual/index.html"),") for serializing/deserializing Json message payloads.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Screenshot of the package imported into the project",src:n(6060).Z,width:"2608",height:"736"})),(0,o.kt)("h2",{id:"restart-unity-and-your-ide"},"Restart Unity and your IDE"),(0,o.kt)("p",null,"After installing the Regression Games Unity Bots package and its dependencies into Unity, please restart Unity and your IDE.  Without this step, your IDE may not properly resolve the new packages even after Unity recompiles the scripts."),(0,o.kt)("h2",{id:"log-into-regression-games"},"Log into Regression Games"),(0,o.kt)("p",null,"After importing the Regression Games package, you can access the settings pane to input your email and password.\nThis will allow your project to access and start your bots. Access this setting page by going to ",(0,o.kt)("strong",{parentName:"p"},"Edit")," >\n",(0,o.kt)("strong",{parentName:"p"},"Project Settings")," > ",(0,o.kt)("strong",{parentName:"p"},"Regression Games"),"."),(0,o.kt)("p",null,"Enter the following information:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"RG Host URL:")," ",(0,o.kt)("inlineCode",{parentName:"li"},"https://play.regression.gg")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"RG Email:")," ",(0,o.kt)("inlineCode",{parentName:"li"},"<your email>")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"RG Password:")," ",(0,o.kt)("inlineCode",{parentName:"li"},"<your password>")),(0,o.kt)("li",{parentName:"ul"},'Make sure both "Enable Screen Overlay" and "Use Global Settings" are checked on')),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Screenshot of the settings page.",src:n(6913).Z,width:"1886",height:"1170"})),(0,o.kt)("h2",{id:"add-the-rgoverlaycanvas"},"Add the RGOverlayCanvas"),(0,o.kt)("p",null,"The RGOverlayCanvas prefab provides a drag and drop overlay that let's you easily start and stop bots running\nin your scene. This is extremely useful when initially creating and debugging your bots."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Note that this overlay is ",(0,o.kt)("strong",{parentName:"p"},"required to be placed into your scene")," for Regression Games to function. The visibility\nof the overlay can be hidden through the settings. If you have multiple scenes where a bot should be used, place\nthis into each scene - the SDK will ensure that only one instance is present.")),(0,o.kt)("p",null,"You can find this prefab by searching in the project file window for ",(0,o.kt)("inlineCode",{parentName:"p"},"RGOverlayCanvas"),' (make sure the "In Packages" filter is selected),\nor by navigating to the ',(0,o.kt)("strong",{parentName:"p"},"Packages")," > ",(0,o.kt)("strong",{parentName:"p"},"Regression Games Unity Bots")," > ",(0,o.kt)("strong",{parentName:"p"},"Runtime")," > ",(0,o.kt)("strong",{parentName:"p"},"Prefabs")," folder."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Screenshot of the search pane for the RGOverlayCanvas.",src:n(9406).Z,width:"2712",height:"364"})),(0,o.kt)("p",null,"Drag this overlay onto your scene. Once you have this overlay available, you can click play to see this in action! A\nRegression Games logo will appear at the bottom of your screen. Click this button to see a dropdown for your bots. You\nlikely will not have any bots yet - that's alright, we will make one soon!"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"If you don't already, your ",(0,o.kt)("strong",{parentName:"p"},"scene needs to have an EventSystem")," to make interaction with the canvas possible.\nYou can do this by right-clicking your scene in the Hierarchy, and adding a ",(0,o.kt)("strong",{parentName:"p"},"GameObject")," > ",(0,o.kt)("strong",{parentName:"p"},"UI")," > ",(0,o.kt)("strong",{parentName:"p"},"Event System"),".\n",(0,o.kt)("em",{parentName:"p"},"You only need to do this if you plan on interacting with the canvas"),".")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Screenshot of the RGOverlayCanvas.",src:n(2424).Z,width:"2712",height:"1504"})),(0,o.kt)("h2",{id:"implement-the-rgbotspawnmanager"},"Implement the RGBotSpawnManager"),(0,o.kt)("p",null,"The RGBotSpawnManager is the primary point of configuration for how your bots are spawned into the game. This component\nprovides a few methods that can be overridden to control how bots are spawned into the scene, how they are seated into\nyour game logic before spawning, how they are destroyed, etc... For this particular tutorial, we need to define one\nmethod, ",(0,o.kt)("a",{parentName:"p",href:"/studios/unity/unity-sdk/RGBotSpawnManager#public-virtual-void-seatbotbotinformation-bottospawn"},(0,o.kt)("inlineCode",{parentName:"a"},"SpawnBot()")),".\nThis method will define how our bot prefab is spawned into the scene."),(0,o.kt)("p",null,"First, create an ",(0,o.kt)("inlineCode",{parentName:"p"},"RGScripts/")," folder in your ",(0,o.kt)("inlineCode",{parentName:"p"},"Assets")," folder. Then, create a file called ",(0,o.kt)("inlineCode",{parentName:"p"},"CharacterBotSpawnManager.cs"),".\nDouble click that file to open it within your editor of choice (we recommend Rider or Visual Studio). We highly recommend\nthat the file is opened as part of the solution / project as a whole, so that code completion is available."),(0,o.kt)("p",null,"Copy and paste the following code into this file. This component allows us to drag and drop a prefab for our bots and\na spawn point directly within our editor, and informs our SDK of these via those overridden functions."),(0,o.kt)("p",null,"See the ",(0,o.kt)("a",{parentName:"p",href:"/studios/unity/unity-sdk/RGBotSpawnManager"},"full reference")," for all the ways you can modify\nthe spawning of bots. Sometimes you may need to add this\nbot to a multiplayer network protocol, configure information like the character type, or define special start logic.\nThis can all be done through the interface provided by ",(0,o.kt)("inlineCode",{parentName:"p"},"RGBotSpawnManager"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},'using RegressionGames;\nusing RegressionGames.Types;\nusing UnityEngine;\n\npublic class CharacterBotSpawnManager : RGBotSpawnManager\n{\n    \n    [SerializeField]\n    [Tooltip("The character to spawn")]\n    private GameObject rgBotPrefab;\n\n    [SerializeField]\n    [Tooltip("Spawn point for RG Bots")]\n    private Transform botSpawnPoint;\n\n    public override GameObject SpawnBot(bool lateJoin, BotInformation botInformation)\n    {\n        Debug.Log("Spawning SAMPLE BOT");\n        var bot = Instantiate(rgBotPrefab, Vector3.zero, Quaternion.identity);\n        bot.transform.position = botSpawnPoint.position;\n\n        // We will add more code here later to configure the bot further \n\n        return bot;\n    }\n\n}\n')),(0,o.kt)("p",null,"Once this component is implemented, create an empty object within the scene, rename it to ",(0,o.kt)("inlineCode",{parentName:"p"},"RGBotSpawner")," (just so we can find it later),\nand attach this ",(0,o.kt)("inlineCode",{parentName:"p"},"CharacterBotSpawnManager")," component to that object. Then, create another empty object, rename it to ",(0,o.kt)("inlineCode",{parentName:"p"},"CharacterSpawn"),",\nposition it within the scene wherever you want to spawn your bot (ideally above the platform), and drag that game object into the\n",(0,o.kt)("strong",{parentName:"p"},"Bot Spawn Point")," entry of the RGBotSpawner's ",(0,o.kt)("inlineCode",{parentName:"p"},"CharacterBotSpawnManager")," component. Finally, find the ",(0,o.kt)("strong",{parentName:"p"},"Player")," prefab provided by the sample project (located within ",(0,o.kt)("strong",{parentName:"p"},"Assets")," > ",(0,o.kt)("strong",{parentName:"p"},"Prefabs"),"), and drag this into the ",(0,o.kt)("strong",{parentName:"p"},"Rg Bot Prefab")," entry. Regression Games now knows how to load and unload bots from your scene! Make sure to save the scene."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Screenshot of the RGOverlayCanvas.",src:n(5694).Z,width:"1432",height:"628"})),(0,o.kt)("h2",{id:"add-state-information-to-relevant-gameobjects"},"Add state information to relevant GameObjects"),(0,o.kt)("p",null,"The next step is to indicate what state in your scene is available to bots. This state is used by bots to\nmake decisions on what actions to take. State is relayed to bots by attaching ",(0,o.kt)("a",{parentName:"p",href:"/studios/unity/unity-sdk/RGState"},(0,o.kt)("inlineCode",{parentName:"a"},"RGState")),"\ncomponents to any game object or prefab that you want your bots to know about. "),(0,o.kt)("p",null,"The base implementation of ",(0,o.kt)("a",{parentName:"p",href:"/studios/unity/unity-sdk/RGState"},(0,o.kt)("inlineCode",{parentName:"a"},"RGState"))," provided by Regression Games relays default\ninformation such as a ",(0,o.kt)("inlineCode",{parentName:"p"},"type"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"position"),", and a unique identifier. In this sample scene, we will use this default\nstate information, but of course you may need to provide additional state, such as a players team, health, if a door is open, etc...\nYou can do this by checking out the docs and examples for ",(0,o.kt)("a",{parentName:"p",href:"/studios/unity/unity-sdk/RGState#public-virtual-dictionarystring-object-getstate"},(0,o.kt)("inlineCode",{parentName:"a"},"RGState.GetState()")),"."),(0,o.kt)("p",null,"In this scene, open the ",(0,o.kt)("inlineCode",{parentName:"p"},"Player")," prefab located in the ",(0,o.kt)("strong",{parentName:"p"},"Assets > Prefabs")," folder by double clicking\nthe prefab, click ",(0,o.kt)("strong",{parentName:"p"},"Add Component"),", and then add the ",(0,o.kt)("inlineCode",{parentName:"p"},"RGState"),' component by searching for "RG State" in the component\nsearch modal that pops up. Once that component is added to the prefab, change the ',(0,o.kt)("inlineCode",{parentName:"p"},"Object Type")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"Player"),", make sure\nthat both ",(0,o.kt)("inlineCode",{parentName:"p"},"Is Player")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Is Runtime Object")," are checked. Make sure to save the changes you make to these existing\nprefabs by clicking ",(0,o.kt)("strong",{parentName:"p"},"Save"),"! Repeat this process for the ",(0,o.kt)("inlineCode",{parentName:"p"},"PowerUp")," prefab, but change the ",(0,o.kt)("inlineCode",{parentName:"p"},"Object Type")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"PowerUp"),", and\nonly have ",(0,o.kt)("inlineCode",{parentName:"p"},"Is Runtime Object")," checked (",(0,o.kt)("inlineCode",{parentName:"p"},"Is Player")," should be off)."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Screenshot of the prefab with a RG State script.",src:n(3766).Z,width:"3450",height:"1840"})),(0,o.kt)("p",null,"That's all you need to do for your bot to see the state of the game!"),(0,o.kt)("h2",{id:"implement-actions-your-bot-can-take"},"Implement actions your bot can take"),(0,o.kt)("p",null,"Finally, we need to provide an interface that allows bots to control these characters in your game. This is\ndone using the ",(0,o.kt)("a",{parentName:"p",href:"/studios/unity/unity-sdk/RGAction"},(0,o.kt)("inlineCode",{parentName:"a"},"RGAction"))," interface. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},"/**\n* Represents an action that a bot can instruct the game object to take.\n* This RGAction class should be inherited in a sub class, and developers\n* will need to implement the `StartAction` and `GetActionName` function.\n*/\npublic abstract class RGAction : MonoBehaviour\n{\n\n    /**\n    * The name of this action, which is used by the bot to request this specific action\n    */\n    public abstract string GetActionName();\n\n    /**\n    * The action to kick off, given some arguments. Usually this will set up some state\n    * variables inside of this component, and then most of the logic will happen in an\n    * update function.\n    */\n    public abstract void StartAction(Dictionary<string, object> input);\n\n}\n")),(0,o.kt)("p",null,"Create a new file called ",(0,o.kt)("inlineCode",{parentName:"p"},"RGPlayerMoveAction.cs")," within the ",(0,o.kt)("inlineCode",{parentName:"p"},"RGScripts/")," folder, and copy the following code into that file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},'using System.Collections.Generic;\nusing RegressionGames.RGBotConfigs;\nusing UnityEngine;\n\npublic class RGPlayerMoveAction : RGAction\n{\n    \n    private Vector3? targetPosition;\n    private Rigidbody rigidbody;\n    public float speed = 5000f;\n    public float range = 1f;\n\n    public void Awake()\n    {\n        rigidbody = GetComponent<Rigidbody>();\n    }\n\n    public override string GetActionName()\n    {\n        return "MoveToPosition";\n    }\n\n    public override void StartAction(Dictionary<string, object> input)\n    {\n        var targetX = float.Parse(input["x"].ToString());\n        var targetY = float.Parse(input["y"].ToString());\n        var targetZ = float.Parse(input["z"].ToString());\n        targetPosition = new Vector3(targetX, targetY, targetZ);\n    }\n\n    public void Update()\n    {\n        \n        // If we are in range, reset the action\n        if (targetPosition != null && Vector3.Distance((Vector3) targetPosition, transform.position) < range)\n        {\n            targetPosition = null;\n        }\n        \n        // Set the target velocity\n        if (targetPosition != null)\n        {\n            rigidbody.velocity = ((Vector3) targetPosition - transform.position).normalized * speed * Time.deltaTime;\n        }\n    }\n}\n')),(0,o.kt)("p",null,"You can think of ",(0,o.kt)("a",{parentName:"p",href:"/studios/unity/unity-sdk/RGAction"},(0,o.kt)("inlineCode",{parentName:"a"},"RGAction"))," as a task that your bot can run. In this case,\nwe define a move action, which tells the bot to move to a location until they are in range of the target location.\nBecause ",(0,o.kt)("a",{parentName:"p",href:"/studios/unity/unity-sdk/RGAction"},(0,o.kt)("inlineCode",{parentName:"a"},"RGAction"))," is a MonoBehaviour, ",(0,o.kt)("inlineCode",{parentName:"p"},"Awake()")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Update()")," methods are\nimplemented that run the logic for this type of action. An action can triggered by a Regression Games bot, and the\naction script can execute the logic to perform that action."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"GetActionName()")," defines this action with a name of ",(0,o.kt)("inlineCode",{parentName:"p"},'"MoveToPosition"'),", which is the identifier that will be used\nwhen writing the bot. ",(0,o.kt)("inlineCode",{parentName:"p"},"StartAction()")," takes in the arguments passed by the bot that define how the action will run,\nand stores this information within the component. These arguments are not used to execute logic right away, but rather\nallows the ",(0,o.kt)("inlineCode",{parentName:"p"},"Update()")," function to run the logic over time (as most actions will need more than one tick to run).\nIn this specific case, the bot passes an x, y, and z value, which is the position of the target that the\nbot should approach."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Add this new ",(0,o.kt)("inlineCode",{parentName:"strong"},"RGPlayerMoveAction")," component onto the Player prefab,")," and make sure to click save."),(0,o.kt)("p",null,"Finally, search for and add the ",(0,o.kt)("inlineCode",{parentName:"p"},"RGAgent")," script to the Player prefab - this tells Regression Games to find all ",(0,o.kt)("inlineCode",{parentName:"p"},"RGAction"),"s on this\nprefab and register them with the agent, and informs Regression Games that this prefab will act as an agent."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Screenshot of the prefab with a RG Action script.",src:n(2436).Z,width:"2886",height:"1640"})),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"It is common that you will want to find GameObjects and other components within your scene to perform actions.\nSee the ",(0,o.kt)("a",{parentName:"p",href:"../unity-sdk/RGFindUtils"},(0,o.kt)("inlineCode",{parentName:"a"},"RGFindUtils"))," class for helper functions which find GameObjects and components\nwithin your scene based on information coming in from an action.")),(0,o.kt)("h2",{id:"activate-and-start-regression-games-in-your-game-loop"},"Activate and start Regression Games in your game loop"),(0,o.kt)("p",null,"The last Unity change needed is to start Regression Games when your game starts. Open up the\n",(0,o.kt)("inlineCode",{parentName:"p"},"Assets/Prefabs/Game Scripts/GameLoop.cs")," file, and copy these contents into the ",(0,o.kt)("inlineCode",{parentName:"p"},"GameLoop")," class. You\nwill also need to add ",(0,o.kt)("inlineCode",{parentName:"p"},"using RegressionGames;")," to the top of the file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},'...\n\nvoid Awake()\n{\n    RGSettings rgSettings = RGSettings.GetOrCreateSettings();\n    if (rgSettings.GetUseSystemSettings())\n    {\n        long[] botIds = rgSettings.GetBotsSelected().ToArray();\n        int errorCount = 0;\n        Task.WhenAll(botIds.Select(botId =>\n            RGServiceManager.GetInstance()\n                ?.QueueInstantBot((long)botId, (botInstance) => { }, () => errorCount++)));\n        if (errorCount > 0)\n        {\n            Debug.Log($"Error starting {errorCount} of {botIds.Length} RG bots, starting without them");\n        }\n    }\n    RGBotServerListener.GetInstance()?.StartGame();\n    RGBotServerListener.GetInstance()?.SpawnBots();\n}\n\nprivate void OnDestroy()\n{\n    RGBotServerListener.GetInstance()?.StopGame();\n}\n\n...\n')),(0,o.kt)("p",null,"This will start the RegressionGames connection to the bot server, and will start spawning any pre-selected\nbots from your settings. When the game shuts down, it will then stop any running bots."),(0,o.kt)("h2",{id:"putting-it-all-together"},"Putting it all together"),(0,o.kt)("p",null,"The Unity integration for this game is now complete! The final part is to implement a bot that will connect to\nthe scene and perform on the behalf of a player."),(0,o.kt)("p",null,"Create a new bot by navigating to the ",(0,o.kt)("a",{parentName:"p",href:"https://play.regression.gg/bots/create-bot"},"Bot Manager page")," on\nRegression Games and clicking ",(0,o.kt)("strong",{parentName:"p"},"Create Bot"),". Select the ",(0,o.kt)("strong",{parentName:"p"},"Unity"),' option, which will open a GitHub\npage to copy our Unity template. Create the GitHub repo with a name like "RGSampleBot"\n(note that sometimes GitHub seems to break at this  point, please try again if that happens), and\nthen back on the Regression Games site, select that repo (click the refresh button in the panel on the right if\nyou can\'t see your repository, or click the link to connect the repository if it is private), the main branch,\nand the root directory. Give your bot a name, select the Unity bot type, and then click ',(0,o.kt)("strong",{parentName:"p"},"Create Bot"),". "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Screenshot of the bot creation page.",src:n(1465).Z,width:"1546",height:"990"}),"\n",(0,o.kt)("img",{alt:"Screenshot of the bot github page.",src:n(9244).Z,width:"1530",height:"1484"}),"\n",(0,o.kt)("img",{alt:"Screenshot of the bot details page.",src:n(3735).Z,width:"2806",height:"1498"})),(0,o.kt)("p",null,"Once the bot is created, clone the repository and open the ",(0,o.kt)("inlineCode",{parentName:"p"},"index.js")," file.\nReplace the contents with the following, and commit + push your changes to git."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'export function configureBot(rg) {\n  rg.characterConfig = {\n    speed: 4000\n  };\n}\n\nexport async function processTick(rg) {\n\n  let powerUps = rg.findEntities("PowerUp")\n  if (powerUps) {\n    rg.performAction("MoveToPosition", powerUps[0].position)\n  }\n\n}\n')),(0,o.kt)("p",null,"The bot will find all entities of the ",(0,o.kt)("inlineCode",{parentName:"p"},"PowerUp")," type, and then queue the action ",(0,o.kt)("inlineCode",{parentName:"p"},"MoveToPosition")," to\nmove towards that location. Push your changes, start up the scene in Unity, and then select and start the bot\nfrom the Regression Games overlay (click the button in the bottom right of the screen)."),(0,o.kt)("p",null,"After a few seconds, you will see your bot spawn and collect the power up! If something is not working,\nsend us a message on Slack or Discord and we will respond almost immediately!"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Video of the bot performing.",src:n(4599).Z,width:"720",height:"480"})),(0,o.kt)("h2",{id:"extensions---configuring-your-bot"},"Extensions - Configuring your bot"),(0,o.kt)("p",null,"You'll notice that in our JavaScript bot code, there is a ",(0,o.kt)("inlineCode",{parentName:"p"},"configureBot(rg)")," function which allows\nus to set arbitrary data that is passed to Unity to configure the bot. Let's extend our Unity integration\nto take this ",(0,o.kt)("inlineCode",{parentName:"p"},"speed")," configuration and set that on the bot in our code."),(0,o.kt)("p",null,"First, create a new file called ",(0,o.kt)("inlineCode",{parentName:"p"},"BotCharacterConfig.cs")," within ",(0,o.kt)("inlineCode",{parentName:"p"},"RGScripts/")," with the following contents.\nThis serialize type should match the data being returned by your bot's ",(0,o.kt)("inlineCode",{parentName:"p"},"configureBot")," function, which\nis serialized into JSON and later parsed using this type."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},"using System;\n\n[Serializable]\npublic class BotCharacterConfig\n{\n    public float speed;\n}\n")),(0,o.kt)("p",null,"Now, within ",(0,o.kt)("inlineCode",{parentName:"p"},"CharacterBotSpawnManager.cs"),", under the comment that says ",(0,o.kt)("inlineCode",{parentName:"p"},"// We will add more code here later to configure the bot further"),"\nand before ",(0,o.kt)("inlineCode",{parentName:"p"},"return bot"),", insert the following code:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},'RGPlayerMoveAction moveAction = bot.GetComponent<RGPlayerMoveAction>();\nBotCharacterConfig config = botInformation.ParseCharacterConfig<BotCharacterConfig>();\nif (config != null)\n{\n    Debug.Log($"Changed speed to ${config.speed}");\n    moveAction.speed = config.speed;\n}\n')),(0,o.kt)("p",null,"On bot spawn, this will grab our action script and the bot config that is being passed in, and set the speed\nto the speed defined in that JavaScript file."),(0,o.kt)("p",null,"Start up the scene, and use the overlay to spawn a bot. While your bot is running, try updating the JavaScript\nbot code to use very high and low values for speed. Add, commit, and push your changes, and you will see\nthe bot live reload and change its speed!"),(0,o.kt)("h2",{id:"next-steps"},"Next steps"),(0,o.kt)("p",null,"For immediate next steps, we recommend checking out our guide on ",(0,o.kt)("a",{parentName:"p",href:"/studios/unity/unity-sdk/creating-bots/validation-bots"},"creating bots that can do QA validations"),". In soon-to-be-added guides, tutorials will walk you through:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Creating bots with abilities"),(0,o.kt)("li",{parentName:"ul"},"Pairing a Regression Games bot with dialog systems such as character.ai"),(0,o.kt)("li",{parentName:"ul"},"Creating bots that can exploit level structure and attempt to break your game"),(0,o.kt)("li",{parentName:"ul"},"Bots that can click through menus")))}h.isMDXComponent=!0},1465:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/create_bot_1-f34713c604742cc517ada82a7973b8a5.png"},9244:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/create_bot_2-c5b7d7ea1107d013e5043aaad0e4e397.png"},3735:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/create_bot_3-2c138983476fe16185369ce1afe296ec.png"},1218:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tutorial_0_start-e9224f1c81e50011f9ddae40e48b4b97.png"},6060:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tutorial_1_package-0d2bfbaccdb409a6013aa1de51012636.png"},6913:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tutorial_2_settings-decf7b09a9496dd2c7890c5059d5e380.png"},9406:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tutorial_3_RGOverlay1-7835ad24e20bcb6c3268be72fcdf1409.png"},2424:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tutorial_4_RGOverlay2-4b1a50295138bde4cae97f700861fa5d.png"},5694:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tutorial_5_spawner-34b82c2566a06c8beedda4b2cd454482.png"},3766:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tutorial_6_prefab-22f212644b6b9196e03c3cc9d3b155cd.png"},2436:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tutorial_7_action-0d72329afa60d8e77afca8efc5e33d8d.png"},4599:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/tutorial_8_demo-22c7f0c12ad1aebbeb60a9b19a6e4315.gif"}}]);