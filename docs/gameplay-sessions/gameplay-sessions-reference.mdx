---
sidebar_label: 'Gameplay Sessions Technical Reference'
---

# Gameplay Sessions Technical Reference

Although developers on Regression Games will often interact with the Gameplay Sessions through the web interface or
within the SDK itself, you may be interested in viewing and understanding the data directly. This document will provide
a technical overview of the Gameplay Sessions system, as well as more technical details and FAQ.

## Overview of the Schema

### Folder and File Structure

When a Gameplay Session is recorded, all data is first stored on disk within two folders:

* `~/unity_videos/run_{#}/screenshots` - A folder with screenshots for each recorded tick of the session. Each
  screenshot is named with the format `{tick#}.jpg`, where `tick#` is the in-game tick from the start of the session.
* `~/unity_videos/run_{#}/data` - A folder with the state and input data for each recorded tick of the session. Each
  tick is stored in a JSON file named with the format `{tick#}.json`.

After you are done recording, you will not see these folders, because they will be compressed into zip files
(`data.zip` and `screenshots.zip` within the `run_{#}` folder).

Additionally, there is a `thumbnail.jpg` file stored in this run folder, which is the screenshot from the middle of
your gameplay session.

### Structure of {tick}.json Files

Each `{tick}.json` file contains the following information:

* Timing information (e.g. tick number, time, time scale)
* Screen size information
* Information about the state of the game (i.e. the game objects / entities within the game on that tick)
* Information about inputs on that tick (i.e. keyboard, mouse)
* Key frames on this tick (explained below)

#### Top Level Schema

```json
{
  "tickNumber": number, // An integer representing the tick number of this tick
  "keyFrame": [string], // An array of strings representing the key frames on this tick
  "time": number, // A float representing the time in seconds since the start of the session
  "timeScale": number, // A float representing the time scale of the game
  "screenSize": {
    "x": number, // An integer representing the width of the screen
    "y": number // An integer representing the height of the screen
  },
  "performance": {
    "previousTickTime": number, // A float representing the time in seconds since the previous tick
    "framesSincePreviousTick": number, // An integer representing the number of frames since the previous tick
    "fps": number, // A float representing the frames per second
    "engineStats": {
      "frameTime": number, // A float representing the time in seconds to render the frame
      "renderTime": number, // A float representing the time in seconds to render the frame
      "triangles": number, // An integer representing the number of triangles rendered
      "vertices": number, // An integer representing the number of vertices rendered
      "setPassCalls": number, // An integer representing the number of set pass calls
    }
  },
  "state": GameObjectState[], // An array of objects holding the state of game objects (see following section)
  "inputs": {
    "keyboard": KeyboardInput[], // An array of objects holding keyboard input (see following section)
    "mouse": MouseInput[] // An array of objects holding mouse input (see following section)
  }
```

#### GameStateObject Schema

Within the `state` field, an array of objects represents the state of game objects on this tick. Depending on the
[options you have configured](google.com) for recording, some objects and state in your scene may not be present in this
list. Each object has the following schema:

```json
{
  "id": number, // An integer representing the unique identifier of this object
  "path": string, // A string representing the path of this object in the scene hierarchy
  "scene": string, // A string representing the scene this object is in
  "tag": string, // A string representing the tag of this object
  "layer": string, // A string representing the layer of this object
  "rendererCount": number, // An integer representing the number of renderers on this object
  "screenSpaceBounds": {
    "center": {
      "x": number, // A float representing the x coordinate of the center of the bounds
      "y": number, // A float representing the y coordinate of the center of the bounds
      "z": number // A float representing the z coordinate of the center of the bounds
    },
    "extents": {
      "x": number, // A float representing the x coordinate of the extents of the bounds
      "y": number, // A float representing the y coordinate of the extents of the bounds
      "z": number // A float representing the z coordinate of the extents of the bounds
    }
  },
  "worldSpaceBounds": {
    "center": {
      "x": number, // A float representing the x coordinate of the center of the bounds
      "y": number, // A float representing the y coordinate of the center of the bounds
      "z": number // A float representing the z coordinate of the center of the bounds
    },
    "extents": {
      "x": number, // A float representing the x coordinate of the extents of the bounds
      "y": number, // A float representing the y coordinate of the extents of the bounds
      "z": number // A float representing the z coordinate of the extents of the bounds
    }
  },
  "position": {
    "x": number, // A float representing the x coordinate of the position of the object
    "y": number, // A float representing the y coordinate of the position of the object
    "z": number // A float representing the z coordinate of the position of the object
  },
  "rotation": {
    "x": number, // A float representing the x component of the rotation of the object
    "y": number, // A float representing the y component of the rotation of the
    "z": number, // A float representing the z component of the rotation of the object
    "w": number // A float representing the w component of the rotation of the object
  },
  "rigidbodies": Rigidbody[], // An array of objects representing the rigidbodies on this object
  "colliders": Collider[], // An array of objects representing the colliders on this object
  "behaviours": Behaviour[] // An array of objects representing the behaviours on this object
}
```

#### KeyboardInput Schema

Within the `inputs` field, an array of objects represents the keyboard input on this tick. Each object has the following
schema:

```json
{
  "startTime": number, // A float representing the time in seconds since the start of the session when this input started
  "key": string // A string representing the key that was pressed
}
```

#### MouseInput Schema

Within the `inputs` field, an array of objects represents the mouse input on this tick. Each object has the following
schema:

```json
{
  "startTime": number, // A float representing the time in seconds since the start of the session when this input started
  "position": {
    "x": number, // A float representing the x coordinate of the mouse position
    "y": number // A float representing the y coordinate of the mouse position
  },
  "worldPosition": {
    "x": number, // A float representing the x coordinate of the world position of the mouse
    "y": number, // A float representing the y coordinate of the world position of the mouse
    "z": number // A float representing the z coordinate of the world position of the mouse
  },
  "leftButton": boolean, // A boolean representing whether the left mouse button was pressed
  "middleButton": boolean, // A boolean representing whether the middle mouse button was pressed
  "rightButton": boolean, // A boolean representing whether the right mouse button was pressed
  "forwardButton": boolean, // A boolean representing whether the forward mouse button was pressed
  "backButton": boolean, // A boolean representing whether the back mouse button was pressed
  "scroll": {
    "x": number, // A float representing the x component of the scroll
    "y": number // A float representing the y component of the scroll
  },
  "clickedObjectIds": [number] // An array of integers representing the unique identifiers of the objects clicked
}
```

### Key Frames

Key frames are a way to mark important moments in your gameplay session. They are represented as an array of strings in
the `keyFrame` field of the `{tick}.json` file.


#### Full Example of a Tick JSON File

```json
{
  "tickNumber": 2,
  "keyFrame": [
    "UI_ELEMENT"
  ],
  "time": 8.4254524,
  "timeScale": 1,
  "screenSize": {
    "x": 2078,
    "y": 1137
  },
  "performance": {
    "previousTickTime": 8.4254524,
    "framesSincePreviousTick": 0,
    "fps": 0,
    "engineStats": {
      "frameTime": 0.0047242,
      "renderTime": 0.0035487,
      "triangles": 13910,
      "vertices": 19124,
      "setPassCalls": 22,
      "drawCalls": 110,
      "dynamicBatchedDrawCalls": 2,
      "staticBatchedDrawCalls": 2,
      "instancedBatchedDrawCalls": 0,
      "batches": 110,
      "dynamicBatches": 2,
      "staticBatches": 1,
      "instancedBatches": 0
    }
  },
  "state": [
    {
      "id": -13744,
      "path": "UI Canvas/LobbyPopup/Tabs/LobbyCreationUI/Lobby Name Input Field",
      "scene": "MainMenu",
      "tag": "Untagged",
      "layer": "UI",
      "rendererCount": 4,
      "screenSpaceBounds": {
        "center": {
          "x": 1038.0159912,
          "y": 556.3427734,
          "z": 0
        },
        "extents": {
          "x": 320.1767578,
          "y": 32.0177001,
          "z": 0.05
        }
      },
      "worldSpaceBounds": null,
      "position": {
        "x": 1038.0159912,
        "y": 556.3427734,
        "z": 0
      },
      "rotation": {
        "x": 0,
        "y": 0,
        "z": 0,
        "w": 1
      },
      "rigidbodies": [],
      "colliders": [],
      "behaviours": [
        {
          "name": "UnityEngine.UI.Image",
          "path": "UI Canvas/LobbyPopup/Tabs/LobbyCreationUI/Lobby Name Input Field",
          "state": {
            "sourceImage": "inputfield_Blank",
            "color": {
              "r": 1,
              "g": 1,
              "b": 1,
              "a": 1
            },
            "material": "Default UI Material",
            "raycastTarget": true,
            "preserveAspect": false
          }
        },
        {
          "name": "UnityEngine.UI.InputField",
          "path": "UI Canvas/LobbyPopup/Tabs/LobbyCreationUI/Lobby Name Input Field",
          "state": {}
        },
        {
          "name": "UnityEngine.UI.LayoutElement",
          "path": "UI Canvas/LobbyPopup/Tabs/LobbyCreationUI/Lobby Name Input Field/Lobby Name Input Field Input Caret",
          "state": {}
        },
        {
          "name": "UnityEngine.UI.Text",
          "path": "UI Canvas/LobbyPopup/Tabs/LobbyCreationUI/Lobby Name Input Field/InputBox",
          "state": {
            "text": "Enter your lobby name...",
            "font": "Arial",
            "fontStyle": "BoldAndItalic",
            "fontSize": 50,
            "color": {
              "r": 0.9215687,
              "g": 0.8196079,
              "b": 0.2470588,
              "a": 0.5
            },
            "raycastTarget": true
          }
        },
        {
          "name": "UnityEngine.UI.Text",
          "path": "UI Canvas/LobbyPopup/Tabs/LobbyCreationUI/Lobby Name Input Field/InputText",
          "state": {
            "text": "",
            "font": "Arial",
            "fontStyle": "Bold",
            "fontSize": 50,
            "color": {
              "r": 0.9215687,
              "g": 0.8196079,
              "b": 0.2470588,
              "a": 1
            },
            "raycastTarget": true
          }
        }
      ]
    }
  ],
  "inputs": {
    "keyboard": [],
    "mouse": [
      {
        "startTime": 6.9127706,
        "position": {
          "x": -1,
          "y": 0
        },
        "worldPosition": null,
        "leftButton": false,
        "middleButton": false,
        "rightButton": false,
        "forwardButton": false,
        "backButton": false,
        "scroll": {
          "x": 0,
          "y": 0
        },
        "clickedObjectIds": []
      }
    ]
  }
}
```

## Recording Options

## How GameObjects are scraped

## How performance information is scraped

## How input is scraped

## What is a key frame?