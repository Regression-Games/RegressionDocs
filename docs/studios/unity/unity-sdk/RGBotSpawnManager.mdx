---
sidebar_label: 'RGBotSpawnManager'
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# RGBotSpawnManager

The RGBotSpawnManager is the central configuration point for how bots spawn into your Unity Scene.
The default implementation provides the basic use case of spawning a prefab into some point in the
scene as a bot. Developers must implement at least `GetBotPrefab()` and `GetBotSpawn()`.

## Abstract Methods

### `public abstract GameObject GetBotPrefab();`

Returns the GameObject that Regression Games will spawn into the scene as a bot. This GameObject will often have an `RGAction` and `RGState` component attached to it.

#### Arguments
None

#### Return Value
Returns the GameObject (a prefab) which is the bot that should be spawned.

#### Examples
<Tabs>
<TabItem value="editor_prefab" label="Simple prefab from editor" default>

```cs
...

[SerializeField]
[Tooltip("The character to spawn")]
private GameObject rgBotPrefab;

public override GameObject GetBotPrefab()
{
    return rgBotPrefab;
}

...
```

</TabItem>
<TabItem value="from_file" label="Load prefab from file">
Insert example here
</TabItem>
</Tabs>

### `public abstract Transform GetBotSpawn();`

Returns a Transform at which to spawn a bot into the scene.

#### Arguments
None

#### Return Value
Returns the Transform representing where the bot should be spawned.

#### Examples
<Tabs>
<TabItem value="editor_prefab" label="Using a spawn point object from the editor" default>

```cs
...

[SerializeField]
[Tooltip("Spawn point for RG Bots")]
private Transform botSpawnPoint;

public override Transform GetBotSpawn()
{
    return botSpawnPoint;
}

...
```

</TabItem>
<TabItem value="from_region" label="Spawn at a random point inside a region">
Insert example here
</TabItem>
<TabItem value="from_list" label="Randomly choose a spawn point from a set of spawn points">
Insert example here
</TabItem>
</Tabs>

:::tip

**Request for feedback:** Do you need to relay more information to these functions, such as the `characterConfig`? Let us know
using [this form](#).

:::

## Overridable Virtual Methods

The `RGBotSpawnManager` class has a few methods that can be overridden to further configure how a bot is loaded
and unloaded from a scene.

:::caution

Each of these functions provide important internal implementations that must be called in addition to your
custom code. **Please remember to always call the super/base functions first, which will return objects that
can be further modified.**

:::

### `public virtual void SpawnBots(bool lateJoin = false);`

Spawns any bot that needs to be spawned from our list of connected clients.
It is not common that you will need to modify this function - the `SpawnBot`
function is more likely to be the place where you'd like to modify your bots.

#### Arguments

Argument Name | Type | Default | Description
---|---|---|---|
`lateJoin` | `bool` | `false` | If true, lets RG know that this bot is joining late

#### Return Value

No return value

#### Examples
<Tabs>
<TabItem value="editor_prefab" label="Using a spawn point object from the editor" default>

```cs
...

INSERT HERE

...
```

</TabItem>
<TabItem value="from_region" label="Spawn at a random point inside a region">
Insert example here
</TabItem>
<TabItem value="from_list" label="Randomly choose a spawn point from a set of spawn points">
Insert example here
</TabItem>
</Tabs>

### `public virtual GameObject SpawnBot(bool lateJoin, uint clientId, string botName, string characterConfig)`

Spawns a bot into the scene.

#### Arguments

Argument Name | Type | Default | Description
---|---|---|---|
`lateJoin` | `bool` | required | If true, lets RG know that this bot is joining late
`clientId` | `uint` | required | The ID of the client that will be controlling this bot
`botName` | `string` | required | The name of the bot
`characterConfig` | `string` | required | A JSON string that can be used to customize your bot

#### Return Value

The GameObject that has been spawned into the scene.

#### Examples
<Tabs>
<TabItem value="editor_prefab" label="Use the characterConfig to modify my spawned bot" default>

```cs
public override GameObject SpawnBot(bool lateJoin, uint clientId, string botName, string characterConfig)
{
    GameObject spawnedBot = base.SpawnBot(lateJoin, clientId, botName, characterConfig);

    // Do something special, like configuration, creating a networked object, etc...
    RGPlayerMoveAction moveAction = spawnedBot.GetComponent<RGPlayerMoveAction>();
    BotCharacterConfig config = JsonUtility.FromJson<BotCharacterConfig>(characterConfig);
    if (config != null)
    {
        Debug.Log($"Changed speed to ${config.speed}");
        moveAction.speed = config.speed;
    }
    return spawnedBot;
}
```

</TabItem>
</Tabs>

### `public virtual void TeardownBot(uint clientId)`

A method that gets called when a bot has received a teardown request (i.e. when the bot has signaled that
it is finished, or when the scene shuts down).

#### Arguments

Argument Name | Type | Default | Description
---|---|---|---|
`clientId` | `uint` | required | The ID of the client that is disconnecting

#### Return Value

No return value

#### Examples
<Tabs>
<TabItem value="editor_prefab" label="Disconnect the character from a network when tearing down" default>

```cs
INSERT EXAMPLE HERE
```

</TabItem>
</Tabs>

### `public virtual void StopGame()`

A method that gets called with the game or scene is terminated. This will remove all bots from the game. 
In most cases, you will not need to override this method, and instead should look at TeardownBot().

#### Arguments

No arguments

#### Return Value

No return value


### `public int? GetPlayerId(uint clientId)`

Returns the Instance ID of the transform for the bot in the scene. This can be used later
to reference the bot in the scene.

#### Arguments

Argument Name | Type | Default | Description
---|---|---|---|
`clientId` | `uint` | required | The ID of the client whose bot you want to access

#### Return Value

The Instance ID of the bot's Transform, or null otherwise.

### `public virtual BotInformation SeatPlayer(uint clientId, string characterConfig, string botName)`

A method that gets called before spawning a player, but after a client has connected. This is
useful for seating a bot into your game before their prefab has actually spawned - for instance,
when choosing a character in a character selection screen. This queues the bot to be spawned by
the `SpawnBots()` function.

#### Arguments

Argument Name | Type | Default | Description
---|---|---|---|
`clientId` | `uint` | required | The ID of the client whose bot is connecting
`characterConfig` | `string` | required | A JSON string that can be used to customize your bot
`botName` | `string` | required | The name of the bot

#### Return Value

A [`BotInformation`](./BotInformation) object that contains the clientId, characterConfig, and botName of the connecting bot.


# RGBotSpawnManager Lifecycle

[INSERT DIAGRAM HERE]